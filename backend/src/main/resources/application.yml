# Application Configuration
spring:
  application:
    name: ${APP_NAME:kaleidoscope-backend}
  app:
    base-url: ${APP_BASE_URL:http://localhost:8080}
    defaults:
      cover-photo-url: https://res-console.cloudinary.com/dkadqnp9j/media_explorer_thumbnails/f9636ce5153d08babcbc7381fc4cc546/detailed
  # Database Configuration
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:kaleidoscope}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      idle-timeout: 300000
      max-lifetime: ${DB_MAX_LIFETIME:1800000}
      connection-timeout: 30000
      pool-name: KaleidoscopeHikariCP
      auto-commit: true

  # Redis Configuration for Upstash
  data:
    redis:
      url: ${REDIS_URL:redis://localhost:6379}
      streams:
        consumer:
          poll-timeout-ms: 10000

  # Elasticsearch Configuration
  elasticsearch:
    uris: ${SPRING_ELASTICSEARCH_URIS:http://localhost:9200}
    username: ${SPRING_ELASTICSEARCH_USERNAME:elastic}
    password: ${SPRING_ELASTICSEARCH_PASSWORD:changeme123}

  # JPA Configuration
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        show_sql: false
        format_sql: true
        hbm2ddl:
          auto: update

  # File Upload Configuration
  servlet:
    multipart:
      enabled: true
      max-file-size: ${MAX_FILE_SIZE:10MB}
      max-request-size: ${MAX_REQUEST_SIZE:20MB}
      file-size-threshold: ${FILE_SIZE_THRESHOLD:2KB}
      resolve-lazily: true

# Server Configuration
server:
  servlet:
    context-path: ${CONTEXT_PATH:/kaleidoscope}
  forward-headers-strategy: framework
  tomcat:
    remoteip:
      remote-ip-header: x-forwarded-for
      protocol-header: x-forwarded-proto
      port-header: x-forwarded-port

# SpringDoc OpenAPI Configuration
springdoc:
  api-docs:
    path: /v3/api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: alpha
    tags-sorter: alpha
    display-request-duration: true
    disable-swagger-default-url: true
    config-url: /v3/api-docs/swagger-config
    url: /v3/api-docs
    enabled: true
  use-management-port: false
  use-root-path: false
  show-actuator: false

allowed:
  origins: ${ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8080}

jwt:
  secret: ${JWT_SECRET}
  expiration: 86400000
  cookie-max-age-days: 7

# External Services Configuration
cloudinary:
  cloud-name: ${CLOUDINARY_CLOUD_NAME:test-cloud}
  api-key: ${CLOUDINARY_API_KEY:test-api-key}
  api-secret: ${CLOUDINARY_API_SECRET:test-api-secret}
  url: ${CLOUDINARY_URL:cloudinary://test-api-key:test-api-key@test-cloud}

# Resend API Configuration (NEW)
resend:
  api-key: ${RESEND_API_KEY:your_api_key_here}
  from-email: ${RESEND_FROM_EMAIL:Kaleidoscope <onboarding@resend.dev>}